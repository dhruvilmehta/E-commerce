(this["webpackJsonpprojectx-web"]=this["webpackJsonpprojectx-web"]||[]).push([[0],{10:function(e,t,o){},12:function(e,t,o){"use strict";o.r(t);var n=o(1),c=o.n(n),r=o(3),s=o.n(r),a=(o(9),o.p+"static/media/logo.6ce24c58.svg"),i=(o(10),o(0));var l=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("img",{src:a,className:"App-logo",alt:"logo"}),Object(i.jsxs)("p",{children:["Edit ",Object(i.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(i.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},d=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,14)).then((function(t){var o=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;o(e),n(e),c(e),r(e),s(e)}))},u=o(2);function b(e,t,o,n){var c;n&&(c=JSON.stringify(n));var r=localStorage.getItem("token");console.log("Token Passing ",r);var s=new XMLHttpRequest,a="https://projectxweb1.herokuapp.com/api".concat(t);console.log(a,"URL"),s.responseType="json";var i=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var c=o[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");s.open(e,a),s.setRequestHeader("Content-Type","application/json"),r&&s.setRequestHeader("Authorization","Token ".concat(r)),i&&(s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("X-CSRFToken",i)),s.onload=function(){if(403===s.status){var e=s.response.detail;console.log(e),"Authentication credentials were not provided."===e&&-1===window.location.href.indexOf("login")&&(window.location.href="/login/")}o(s.response,s.status)},s.onerror=function(e){console.log("error",e),o({message:"The request was an error"},400)},s.send(c)}function j(e,t){var o;e&&(o=JSON.stringify(e));var n=new XMLHttpRequest;n.responseType="json";var c=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var c=o[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");n.open("POST","https://projectxweb1.herokuapp.com/auth/"),n.setRequestHeader("Content-Type","application/json"),c&&(n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("X-CSRFToken",c)),n.onload=function(){if(403===n.status){var e=n.response.detail;console.log(e)}t(n.response,n.status)},n.onerror=function(e){console.log("error",e),t({message:"The request was an error"},400)},n.send(o)}function O(e,t,o){b("POST","/books/cart/",o,{action:t,id:e})}function m(e){b("GET","/books/cart/",e)}function h(e){var t=e.book,o=e.index,c=e.isDetail,r=e.inCart,s=e.onRemove,a=e.orderid,l=e.checkout,d=Object(n.useState)(e.buttonname?e.buttonname:null),j=Object(u.a)(d,2),m=j[0],h=j[1];console.log("actionname ",m);var f=Object(n.useState)(e.className?e.className:null),x=Object(u.a)(f,2),p=x[0],v=x[1];console.log(p," ClassName");var g=function(e,t){console.log("Add To Cart ",e,t),404===t&&"Book Not Available"===e.detail&&alert("Book Not Available"),400===t&&"Buy"===m&&(window.location.href="/cart/"),201===t&&("Add To Cart"===m&&(h("Remove"),v("btn btn-danger")),"Buy"===m?window.location.href="/cart/":"Remove"===m&&(!0===r||!0===l?(console.log("Remove"),s(o)):(h("Add To Cart"),v("btn btn-primary"))))},k=function(e,t){console.log(e,t),"Book Not Delivered"===e.detail?alert("Book Not Delivered"):(v("btn btn-secondary disabled"),h("Book Processing for Return"))};return Object(i.jsx)("button",{className:p,onClick:function(e){var o=m;e.preventDefault(),e.stopPropagation(),"Add To Cart"===m?(o="Add",O(t.id,o,g)):"Remove"===m?(o="Remove",O(t.id,o,g)):"Buy"===m?c?(o="Add",O(t.id,o,g)):window.location.href="".concat(t.name,"/detail/"):"Buy All"===m?window.location.href="/checkout/":"Return Book"===m&&(!function(e,t){var o={action:"Return",detail:[{orderid:e}]};console.log(o,"Data"),b("POST","/books/owned/",t,o)}(a,k),console.log(a,"order ID OnClick"))},children:m})}function f(e){var t=e.book,o=e.index,c=(e.className,e.isDetail,e.inCart),r=e.onRemove,s=e.owned,a=e.expiry,l=e.orderid,d=e.ordered,b=e.deliveryDate,j=e.delivered,O=e.checkout,m=Object(n.useState)(!1===j?"btn btn-danger disabled":s?a?"btn btn-secondary disabled":"btn btn-danger":d?"btn btn-danger disabled":"btn btn-primary"),f=Object(u.a)(m,2),x=f[0],p=f[1],v=Object(n.useState)(!1===j?"Book Not Delivered Yet":s?a?"Book Processing for Return":"Return Book":d?"Estimated Delivery Date : ".concat(b):"Add To Cart"),g=Object(u.a)(v,2),k=g[0],y=g[1],R=Object(n.useState)(!0),S=Object(u.a)(R,2),w=S[0],C=S[1];Object(n.useEffect)((function(){1==t.does_exists_in_cart&&(p("btn btn-danger"),y("Remove")),C(!1)}),[]);return console.log(t.photo,"Books"),!0===w?"Loading":Object(i.jsxs)("div",{class:"product bookContainer",onClick:function(){window.location.href="/".concat(t.name,"/detail/")},children:[Object(i.jsxs)("div",{class:"product-header",children:[Object(i.jsx)("img",{src:t.photo,alt:""}),Object(i.jsx)("ul",{class:"icons"})]}),Object(i.jsxs)("div",{class:"product-footer",children:[Object(i.jsx)("h3",{children:t.name}),Object(i.jsxs)("div",{class:"rating",children:[Object(i.jsx)("i",{class:"bx bxs-star"}),Object(i.jsx)("i",{class:"bx bxs-star"}),Object(i.jsx)("i",{class:"bx bxs-star"}),Object(i.jsx)("i",{class:"bx bxs-star"}),Object(i.jsx)("i",{class:"bx bx-star"})]}),Object(i.jsxs)("h4",{class:"price",children:["Rs ",t.price]}),Object(i.jsx)(h,{buttonname:k,className:x,checkout:O,book:t,inCart:c,onRemove:function(e){r(e)},index:o,orderid:l})]})]})}function x(e,t){t?b("POST","/profile/",e,t):b("GET","/profile/",e)}function p(e){var t=Object(n.useState)(),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(),a=Object(u.a)(s,2),l=a[0],d=a[1],b=Object(n.useState)(!0),j=Object(u.a)(b,2),O=j[0],m=j[1],h={address:c,mobilenumber:l},f=function(e,t){console.log("Profile ",e,t),200===t?(r(e.address),d(e.mobilenumber),m(!1)):alert("Profile Error")};Object(n.useEffect)((function(){x(f),h={address:c,mobilenumber:l}}),[]);var p=function(e){var t=e.target.name;"address"===t?(r(e.target.value),e.target.className="form-control"):"mobilenumber"===t&&(d(e.target.value),e.target.className="form-control")};return!0===O?"Loading":Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Profile"}),Object(i.jsx)("label",{for:"address",children:"Address"}),Object(i.jsx)("input",{type:"text",class:"form-control text-muted",id:"address",value:c,onChange:p,name:"address"}),Object(i.jsx)("label",{for:"mobilenumber",children:"Mobile Number"}),Object(i.jsx)("input",{type:"number",class:"form-control text-muted",id:"mobilenumber",value:l,onChange:p,name:"mobilenumber"}),Object(i.jsx)("button",{className:"btn btn-secondary",onClick:function(){x(f,h)},children:"Save"})]})}function v(e){var t=e.book,o=Object(n.useState)(t.does_exists_in_cart?"Remove":"Add To Cart"),c=Object(u.a)(o,2),r=c[0],s=(c[1],Object(n.useState)(t.does_exists_in_cart?"btn btn-danger":"btn btn-primary")),a=Object(u.a)(s,2),l=a[0];a[1];return Object(i.jsx)("section",{class:"section product-detail",children:Object(i.jsxs)("div",{class:"details container-md",children:[Object(i.jsxs)("div",{class:"left",children:[Object(i.jsx)("div",{class:"main",children:Object(i.jsx)("img",{src:t.photo,alt:""})}),Object(i.jsxs)("div",{class:"thumbnails",children:[Object(i.jsx)("div",{class:"thumbnail",children:Object(i.jsx)("img",{src:t.photo,alt:""})}),Object(i.jsx)("div",{class:"thumbnail",children:Object(i.jsx)("img",{src:t.photo,alt:""})}),Object(i.jsx)("div",{class:"thumbnail",children:Object(i.jsx)("img",{src:t.photo,alt:""})}),Object(i.jsx)("div",{class:"thumbnail",children:Object(i.jsx)("img",{src:t.photo,alt:""})})]})]}),Object(i.jsxs)("div",{class:"right",children:[Object(i.jsx)("h1",{children:t.name}),Object(i.jsxs)("div",{class:"price",children:["Rs ",t.price]}),Object(i.jsxs)("h3",{children:["Book Category: ",t.type]}),Object(i.jsx)("p",{children:" Book Description "}),Object(i.jsx)(h,{buttonname:"Buy",className:"btn btn-primary",book:t,isDetail:!0}),Object(i.jsx)(h,{buttonname:r,className:l,book:t})]})]})})}function g(e){var t=e.book,o=e.index,n=e.onRemove;return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsxs)("div",{class:"cart-info",children:[Object(i.jsx)("img",{src:t.photo,alt:""}),Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:t.name}),Object(i.jsxs)("span",{children:["Price: Rs ",t.price]}),Object(i.jsx)("br",{}),Object(i.jsx)(h,{buttonname:"Remove",className:"btn btn-danger",book:t,inCart:!0,onRemove:function(){n(o)}})]})]})}),Object(i.jsx)("td",{children:Object(i.jsx)("input",{type:"number",value:"1",min:"1"})}),Object(i.jsxs)("td",{children:["Rs ",t.price]})]})}function k(e,t){var o;e&&(o=JSON.stringify(e));var n=new XMLHttpRequest;n.responseType="json";var c=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var c=o[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken");n.open("POST","https://projectxweb1.herokuapp.com/api/books/users"),n.setRequestHeader("Content-Type","application/json"),c&&(n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("X-CSRFToken",c)),n.onload=function(){if(403===n.status){var e=n.response.detail;console.log(e)}t(n.response,n.status)},n.onerror=function(e){console.log("error",e),t({message:"The request was an error"},400)},n.send(o)}function y(e){var t=Object(n.useState)(""),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(""),a=Object(u.a)(s,2),l=a[0],d=a[1],b={username:c,password:l},O=function(e,t){400===t?alert("Wrong Credentials"):200===t&&(console.log(e.token,t),localStorage.setItem("token","".concat(e.token)),window.location.href="/")},m=function(e,t){console.log("Register ",e,t),200===t&&j(b,O),"A user with that username already exists."===e.username[0]&&alert("User Already Exists")},h=function(e){"username"===e.target.name?r(e.target.value):d(e.target.value)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Login User Form"}),Object(i.jsx)("label",{for:"exampleInputEmail1",children:"Username"}),Object(i.jsx)("input",{type:"text",class:"form-control ",placeholder:"Username",name:"username",value:b.username,onChange:h}),Object(i.jsx)("label",{for:"exampleInputPassword1",children:"Password"}),Object(i.jsx)("input",{type:"password",class:"form-control ",placeholder:"Password",name:"password",value:b.password,onChange:h}),Object(i.jsx)("button",{onClick:function(e){j(b,O)},className:"btn btn-primary",children:"Login"}),Object(i.jsx)("button",{onClick:function(e){k(b,m)},className:"btn btn-secondary",children:"Register"})]})}var R=document.getElementById("root");R&&s.a.render(Object(i.jsx)(l,{}),R);var S=c.a.createElement,w=document.getElementById("books");w&&s.a.render(S((function(e){var t=Object(n.useState)([]),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(!0),a=Object(u.a)(s,2),l=a[0],d=a[1],j=function(e,t){console.log("response",e,t),r(e),d(!1)};return Object(n.useEffect)((function(){b("GET","/books/",j)}),[]),console.log("Books ",c),!0===l?"Loading":Object(i.jsxs)("section",{class:"section all-products",id:"products",children:[Object(i.jsxs)("div",{class:"top container",children:[Object(i.jsx)("h1",{children:"All Products"}),Object(i.jsxs)("form",{children:[Object(i.jsxs)("select",{children:[Object(i.jsx)("option",{value:"1",children:"Defualt Sorting"}),Object(i.jsx)("option",{value:"2",children:"Sort By Price"}),Object(i.jsx)("option",{value:"3",children:"Sort By Popularity"}),Object(i.jsx)("option",{value:"4",children:"Sort By Sale"}),Object(i.jsx)("option",{value:"5",children:"Sort By Rating"})]}),Object(i.jsx)("span",{children:Object(i.jsx)("i",{class:"bx bx-chevron-down"})})]})]}),Object(i.jsx)("div",{class:"product-center container",children:c.map((function(e,t){return Object(i.jsx)(f,{book:e},t)}))})]})}),w.dataset),w);var C=document.getElementById("bookdetail");C&&s.a.render(S((function(e){var t=Object(n.useState)(null),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(!0),a=Object(u.a)(s,2),l=a[0],d=a[1],j=function(e,t){console.log("Book Detail Lookup",e,t),r(e[0]),d(!1)};return Object(n.useEffect)((function(){var t,o;t=e.bookname,o=j,b("GET","/books/".concat(t,"/"),o)}),[]),!0===l?"Loading":Object(i.jsx)(v,{book:c})}),C.dataset),C);var B=document.getElementById("usercart");B&&s.a.render(S((function(e){var t=Object(n.useState)([]),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(!0),a=Object(u.a)(s,2),l=a[0],d=a[1],b=0;Object(n.useEffect)((function(){m(j)}),[]);var j=function(e,t){console.log("Cart Lookup ",e.usercart_set,t),r(e.usercart_set),d(!1)},O=function(e){r(c.filter((function(t){return c.indexOf(t)!==e})))},h=c.map((function(e,t){return console.log(e.book.price),b+=e.book.price,e.book.id}));return l?"":0===h.length?Object(i.jsx)("div",{className:"text-muted",children:"Cart Is Empty"}):Object(i.jsxs)("div",{class:"container-md cart",children:[Object(i.jsxs)("table",{children:[Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Product"}),Object(i.jsx)("th",{children:"Quantity"}),Object(i.jsx)("th",{children:"Subtotal"})]}),c.map((function(e,t){return Object(i.jsx)(g,{book:e.book,index:t,inCart:!0,onRemove:O},t)}))]}),Object(i.jsxs)("div",{class:"total-price",children:[Object(i.jsx)("table",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:"Total"}),Object(i.jsxs)("td",{children:["Rs ",b]})]})}),Object(i.jsx)("a",{href:"/checkout/",class:"checkout btn",children:"Proceed To Checkout"})]})]})}),B.dataset),B);var N=document.getElementById("ownedBooks");N&&s.a.render(S((function(e){var t=Object(n.useState)([]),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(!0),a=Object(u.a)(s,2),l=a[0],d=a[1];Object(n.useEffect)((function(){b("GET","/books/owned/",j)}),[]);var j=function(e,t){500===t||(r(e),console.log(e,"Response")),d(!1)};return l?"Loading":0===c.length?"No Orders":Object(i.jsxs)("div",{className:"product-center container",children:[" ",c.map((function(e,t){return Object(i.jsxs)("div",{className:"border border-secondary mt-3",children:[Object(i.jsx)(f,{book:e.book,owned:!0,expiry:e.expiry,orderid:e.orderid,delivered:e.delivered},t),Object(i.jsxs)("div",{children:["Order Id : ",e.orderid]}),Object(i.jsxs)("div",{children:["Order Duration :",e.duration]}),Object(i.jsxs)("div",{children:["OwnerFrom : ",e.ownerfrom]}),Object(i.jsxs)("div",{children:["Book Expiry : ",e.expiry]}),Object(i.jsxs)("div",{children:["Book Return Amount : ",e.returnamount]}),Object(i.jsxs)("div",{children:["Book Return Date : ",e.returndate]})]})}))]})}),N.dataset),N);var E=document.getElementById("orderedBooks");E&&s.a.render(S((function(e){var t=Object(n.useState)([]),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(!0),a=Object(u.a)(s,2),l=a[0],d=a[1],j=function(e,t){500===t||r(e),d(!1)};return Object(n.useEffect)((function(){b("GET","/books/ordered/",j)}),[]),l?"Loading":0===c.length?"No Orders":Object(i.jsx)("div",{className:"product-center container",children:c.map((function(e,t){return Object(i.jsxs)("div",{className:"border border-secondary",children:[Object(i.jsxs)("div",{children:["Order ID : ",e.id]}),Object(i.jsx)(f,{book:e.book,ordered:!0,deliveryDate:e.deliveryDate},t),Object(i.jsxs)("div",{children:["Delivery Date : ",e.deliveryDate," "]})]})}))})}),E.dataset),E);var T=document.getElementById("login");T&&s.a.render(S((function(e){var t=Object(n.useState)(""),o=Object(u.a)(t,2),c=(o[0],o[1]);return Object(i.jsx)(y,{userLogin:function(e){console.log(e),c(e)}})}),T.dataset),T);var P=document.getElementById("logout");P&&s.a.render(S((function(e){var t=Object(n.useState)("Are You Sure You Want to Logout ? "),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(!0),a=Object(u.a)(s,2),l=a[0],d=a[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");e?(d(!0),console.log(e,"TOKEN")):d(!1)}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{children:c}),!0===l&&Object(i.jsx)("button",{onClick:function(){localStorage.setItem("token",""),r("Log Out Successfull"),window.location.href="/",d(!1)},className:"btn btn-danger",children:"Logout"})]})}),P.dataset),P);var A=document.getElementById("profile");A&&s.a.render(S(p,A.dataset),A);var L=document.getElementById("checkout");L&&s.a.render(S((function(e){var t=Object(n.useState)([]),o=Object(u.a)(t,2),c=o[0],r=o[1],s=Object(n.useState)(!0),a=Object(u.a)(s,2),l=a[0],d=a[1],j=0,O=function(e,t){201===t?r(e.usercart_set):alert("CheckOut Component Error "),d(!1)},h=function(e){r(c.filter((function(t){return c.indexOf(t)!==e})))};Object(n.useEffect)((function(){m(O)}),[]);var x=function(e,t){console.log("Cart Buy All ",e,t),201===t&&(window.location.href="/orders/"),406===t?alert("Profile Not Completed"):alert("Checkout Cart Buy Error ")},v=c.map((function(e,t){return j+=e.book.price,e.book.id}));return!0===l?"Loading":Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"text-warning",children:"Note: Profile Should Be Completed Before Ordering"}),Object(i.jsx)(p,{}),Object(i.jsx)("div",{className:"product-center container",children:c.map((function(e,t){return Object(i.jsx)(f,{book:e.book,index:t,checkout:!0,onRemove:h},t)}))}),Object(i.jsxs)("div",{children:["Total Cost : ",j]}),Object(i.jsx)("button",{className:"btn btn-secondary",onClick:function(){!function(e,t){var o=[];e.forEach((function(e){o.push({id:e})})),console.log(o," BooksArray"),b("POST","/books/cart/",t,{action:"Buy",detail:o})}(v,x)},children:"Place Order"})]})}),L.dataset),L);var I=document.getElementById("search");I&&s.a.render(S((function(e){var t=e.query,o=Object(n.useState)([]),c=Object(u.a)(o,2),r=c[0],s=c[1],a=Object(n.useState)(!0),l=Object(u.a)(a,2),d=l[0],j=l[1],O=function(e,t){console.log(e,t),s(e),j(!1)};return console.log("search results ",r),Object(n.useEffect)((function(){!function(e,t){b("GET","/books/?query=".concat(e),t)}(t,O)}),[]),!0===d?"Loading":Object(i.jsx)("div",{class:"product-center container",children:r.map((function(e,t){return Object(i.jsx)(f,{book:e},t)}))})}),I.dataset),I),d()},9:function(e,t,o){}},[[12,1,2]]]);
//# sourceMappingURL=main.28784232.chunk.js.map