(this["webpackJsonpprojectx-web"]=this["webpackJsonpprojectx-web"]||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),c=n(3),a=n.n(c),s=(n(9),n.p+"static/media/logo.6ce24c58.svg"),i=(n(10),n(0));var d=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("img",{src:s,className:"App-logo",alt:"logo"}),Object(i.jsxs)("p",{children:["Edit ",Object(i.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(i.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),o(e),r(e),c(e),a(e)}))},u=n(2);function b(e,t,n,o){var r;o&&(r=JSON.stringify(o));var c=new XMLHttpRequest,a="http://localhost:8000/api".concat(t);c.responseType="json";var s=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var r=n[o].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken");c.open(e,a),c.setRequestHeader("Content-Type","application/json"),s&&(c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("X-CSRFToken",s)),c.onload=function(){if(403===c.status){var e=c.response.detail;console.log(e)}n(c.response,c.status)},c.onerror=function(e){console.log("error",e),n({message:"The request was an error"},400)},c.send(r)}function j(e,t,n){b("POST","/books/cart/",n,{action:t,id:e})}function O(e){b("GET","/books/cart/",e)}function f(e){var t=e.book,n=e.index,r=e.isDetail,c=e.inCart,a=e.onRemove,s=e.orderid,d=Object(o.useState)(e.buttonname?e.buttonname:null),l=Object(u.a)(d,2),O=l[0],f=l[1],m=Object(o.useState)(e.className?e.className:null),v=Object(u.a)(m,2),p=v[0],g=v[1],h=function(e,t){console.log("Add To Cart ",e,t),201===t&&("Add To Cart"===O?(f("Remove"),g("btn btn-danger")):"Remove"===O&&(!0===c?a(n):(f("Add To Cart"),g("btn btn-primary"))))},k=function(e,t){console.log("BUY ",e,t)},x=function(e,t){console.log("Cart Buy All",e,t),console.log("Buy All Successfull ")},y=function(e,t){console.log(e,t),"Book Not Delivered"===e.detail?alert("Book Not Delivered"):(g("btn btn-secondary disabled"),f("Book Processing for Return"))};return Object(i.jsx)("button",{className:p,onClick:function(n){var o,c,a=O;n.preventDefault(),n.stopPropagation(),"Add To Cart"===O?(a="Add",j(t.id,a,h)):"Remove"===O?(a="Remove",j(t.id,a,h)):"Buy"===O?r?(o=t.name,c=k,b("POST","/books/".concat(o,"/"),c,{action:"Buy"})):window.location.href=t.name:"Buy All"===O?function(e,t){var n=[];e.forEach((function(e){n.push({id:e})})),b("POST","/books/cart/",t,{action:"Buy",detail:n})}(e.cartbooks,x):"Return Book"===O&&(!function(e,t){var n={action:"Return",detail:[{orderid:e}]};console.log(n,"Data"),b("POST","/books/owned/",t,n)}(s,y),console.log(s,"order ID OnClick"))},children:O})}function m(e){var t=e.book,n=e.index,r=e.className,c=e.isDetail,a=e.inCart,s=e.onRemove,d=e.owned,l=e.expiry,b=e.orderid,j=e.ordered,m=e.deliveryDate,v=Object(o.useState)(d?l?"btn btn-secondary disabled":"btn btn-danger":j?"btn btn-danger disabled":"btn btn-primary"),p=Object(u.a)(v,2),g=p[0],h=p[1],k=Object(o.useState)(d?l?"Book Processing for Return":"Return Book":j?"Estimated Delivery Date : ".concat(m):"Add To Cart"),x=Object(u.a)(k,2),y=x[0],B=x[1],R=Object(o.useState)(!0),E=Object(u.a)(R,2),C=E[0],S=E[1],D=function(e,n){e.usercart_set.forEach((function(e){e.book.id===t.id&&(h("btn btn-danger"),B("Remove"))})),S(!1)};return Object(o.useEffect)((function(){O(D)}),[]),!0===C?"":Object(i.jsx)("div",{className:"".concat(r," mt-3"),children:Object(i.jsxs)("div",{class:"card h-100",style:{width:"18rem"},children:[Object(i.jsx)("img",{class:"card-img-top",src:"...",alt:"Card image cap"}),Object(i.jsxs)("div",{class:"card-body",children:[Object(i.jsx)("h5",{class:"card-title",children:t.name}),Object(i.jsxs)("p",{class:"card-text",children:[t.price," ",t.type]}),!d&&!j&&Object(i.jsx)(f,{buttonname:"Buy",className:"btn btn-primary",book:t,isDetail:c}),Object(i.jsx)(f,{buttonname:y,className:g,book:t,inCart:a,onRemove:function(e){s(e)},index:n,orderid:b})]})]})})}var v=document.getElementById("root");v&&a.a.render(Object(i.jsx)(d,{}),v);var p=r.a.createElement,g=document.getElementById("books");g&&a.a.render(p((function(e){var t=Object(o.useState)([]),n=Object(u.a)(t,2),c=n[0],a=n[1],s=function(e,t){a(e),console.log("response",e,t)};return Object(o.useEffect)((function(){b("GET","/books/",s)}),[]),Object(i.jsx)(r.a.Fragment,{children:c.map((function(e,t){return Object(i.jsx)(m,{book:e},"".concat(t,"-{item.id}"))}))})}),g.dataset),g);var h=document.getElementById("bookdetail");h&&a.a.render(p((function(e){var t=Object(o.useState)(null),n=Object(u.a)(t,2),r=n[0],c=n[1],a=Object(o.useState)(!0),s=Object(u.a)(a,2),d=s[0],l=s[1],j=function(e,t){c(e[0]),l(!1)};return Object(o.useEffect)((function(){var t,n;t=e.bookname,n=j,b("GET","/books/".concat(t,"/"),n)}),[]),!0===d?"":Object(i.jsx)(m,{book:r,isDetail:!0})}),h.dataset),h);var k=document.getElementById("usercart");k&&a.a.render(p((function(e){var t=Object(o.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1],a=Object(o.useState)(!0),s=Object(u.a)(a,2),d=s[0],l=s[1],b=0;Object(o.useEffect)((function(){O(j)}),[]);var j=function(e,t){console.log("Cart Lookup ",e.usercart_set,t),c(e.usercart_set),l(!1)},v=function(e){c(r.filter((function(t){return r.indexOf(t)!==e})))},p=r.map((function(e,t){return console.log(e.book.price),b+=e.book.price,e.book.id}));return d?"":0===p.length?Object(i.jsx)("div",{className:"text-muted",children:"Cart Is Empty"}):Object(i.jsxs)("div",{children:[r.map((function(e,t){return Object(i.jsx)(m,{book:e.book,index:t,inCart:!0,onRemove:v},t)})),0!==p.length&&Object(i.jsx)(f,{buttonname:"Buy All",className:"btn btn-primary",cartbooks:p}),0!==p.length&&Object(i.jsxs)("div",{children:["Total Cost ",b]})]})}),k.dataset),k);var x=document.getElementById("ownedBooks");x&&a.a.render(p((function(e){var t=Object(o.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1],a=Object(o.useState)(!0),s=Object(u.a)(a,2),d=s[0],l=s[1];Object(o.useEffect)((function(){b("GET","/books/owned/",j),l(!1)}),[]);var j=function(e,t){c(e),console.log(e),console.log("order",r)};return d?"Loading":Object(i.jsxs)("div",{children:[" ",r.map((function(e,t){return Object(i.jsxs)("div",{className:"border border-secondary mt-3",children:[Object(i.jsxs)("div",{children:["Order Id : ",e.orderid]}),Object(i.jsx)(m,{book:e.book,owned:!0,expiry:e.expiry,orderid:e.orderid},t),Object(i.jsxs)("div",{children:["Order Duration :",e.duration]}),Object(i.jsxs)("div",{children:["OwnerFrom : ",e.ownerfrom]}),Object(i.jsxs)("div",{children:["Book Expiry : ",e.expiry]}),Object(i.jsxs)("div",{children:["Book Return Amount : ",e.returnamount]}),Object(i.jsxs)("div",{children:["Boom Return Date : ",e.returndate]})]})}))]})}),x.dataset),x);var y=document.getElementById("orderedBooks");y&&a.a.render(p((function(e){var t=Object(o.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1],a=Object(o.useState)(!0),s=Object(u.a)(a,2),d=s[0],l=s[1],j=function(e,t){c(e),l(!1)};return Object(o.useEffect)((function(){b("GET","/books/ordered/",j)}),[]),d?"Loading":Object(i.jsx)("div",{children:r.map((function(e,t){return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:["Order ID : ",e.id]}),Object(i.jsx)(m,{book:e.book,ordered:!0,deliveryDate:e.deliveryDate},t),Object(i.jsxs)("div",{children:["Delivery Date : ",e.deliveryDate," "]})]})}))})}),y.dataset),y),l()},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.cd6af848.chunk.js.map