(this["webpackJsonpprojectx-web"]=this["webpackJsonpprojectx-web"]||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var o=n(1),r=n.n(o),s=n(3),a=n.n(s),c=(n(9),n.p+"static/media/logo.6ce24c58.svg"),i=(n(10),n(0));var d=function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsxs)("header",{className:"App-header",children:[Object(i.jsx)("img",{src:c,className:"App-logo",alt:"logo"}),Object(i.jsxs)("p",{children:["Edit ",Object(i.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(i.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},u=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),o(e),r(e),s(e),a(e)}))},l=n(2);function b(e,t,n,o){var r;o&&(r=JSON.stringify(o));var s=localStorage.getItem("token");console.log("Token Passing ",s);var a=new XMLHttpRequest,c="http://localhost:8000/api".concat(t);a.responseType="json";var i=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var r=n[o].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken");a.open(e,c),a.setRequestHeader("Content-Type","application/json"),s&&(console.log(s,"Token Setting"),a.setRequestHeader("Authorization","Token ".concat(s))),i&&(a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("X-CSRFToken",i)),a.onload=function(){if(403===a.status){var e=a.response.detail;console.log(e)}n(a.response,a.status)},a.onerror=function(e){console.log("error",e),n({message:"The request was an error"},400)},a.send(r)}function j(e,t){var n;e&&(n=JSON.stringify(e));var o=new XMLHttpRequest;o.responseType="json";var r=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var r=n[o].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken");o.open("POST","http://localhost:8000/auth/"),o.setRequestHeader("Content-Type","application/json"),r&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-CSRFToken",r)),o.onload=function(){if(403===o.status){var e=o.response.detail;console.log(e)}t(o.response,o.status)},o.onerror=function(e){console.log("error",e),t({message:"The request was an error"},400)},o.send(n)}function f(e,t,n){b("POST","/books/cart/",n,{action:t,id:e})}function m(e){b("GET","/books/cart/",e)}function O(e){var t=e.book,n=e.index,r=e.isDetail,s=e.inCart,a=e.onRemove,c=e.orderid,d=Object(o.useState)(e.buttonname?e.buttonname:null),u=Object(l.a)(d,2),j=u[0],m=u[1],O=Object(o.useState)(e.className?e.className:null),p=Object(l.a)(O,2),g=p[0],v=p[1],h=function(e,t){console.log("Add To Cart ",e,t),201===t&&("Add To Cart"===j?(m("Remove"),v("btn btn-danger")):"Remove"===j&&(!0===s?a(n):(m("Add To Cart"),v("btn btn-primary"))))},k=function(e,t){console.log("BUY ",e,t)},x=function(e,t){console.log("Cart Buy All",e,t),console.log("Buy All Successfull ")},y=function(e,t){console.log(e,t),"Book Not Delivered"===e.detail?alert("Book Not Delivered"):(v("btn btn-secondary disabled"),m("Book Processing for Return"))};return Object(i.jsx)("button",{className:g,onClick:function(n){var o,s,a=j;n.preventDefault(),n.stopPropagation(),"Add To Cart"===j?(a="Add",f(t.id,a,h)):"Remove"===j?(a="Remove",f(t.id,a,h)):"Buy"===j?r?(o=t.name,s=k,b("POST","/books/".concat(o,"/"),s,{action:"Buy"})):window.location.href=t.name:"Buy All"===j?function(e,t){var n=[];e.forEach((function(e){n.push({id:e})})),b("POST","/books/cart/",t,{action:"Buy",detail:n})}(e.cartbooks,x):"Return Book"===j&&(!function(e,t){var n={action:"Return",detail:[{orderid:e}]};console.log(n,"Data"),b("POST","/books/owned/",t,n)}(c,y),console.log(c,"order ID OnClick"))},children:j})}function p(e){var t=e.book,n=e.index,r=e.className,s=e.isDetail,a=e.inCart,c=e.onRemove,d=e.owned,u=e.expiry,b=e.orderid,j=e.ordered,f=e.deliveryDate,p=Object(o.useState)(d?u?"btn btn-secondary disabled":"btn btn-danger":j?"btn btn-danger disabled":"btn btn-primary"),g=Object(l.a)(p,2),v=g[0],h=g[1],k=Object(o.useState)(d?u?"Book Processing for Return":"Return Book":j?"Estimated Delivery Date : ".concat(f):"Add To Cart"),x=Object(l.a)(k,2),y=x[0],R=x[1],S=Object(o.useState)(!0),T=Object(l.a)(S,2),C=T[0],w=T[1],B=function(e,n){403===n||e.usercart_set.forEach((function(e){e.book.id===t.id&&(h("btn btn-danger"),R("Remove"))}));w(!1)};return Object(o.useEffect)((function(){m(B)}),[]),!0===C?"":Object(i.jsx)("div",{className:"".concat(r," mt-3"),children:Object(i.jsxs)("div",{class:"card h-100",style:{width:"18rem"},children:[Object(i.jsx)("img",{class:"card-img-top",src:"...",alt:"Card image cap"}),Object(i.jsxs)("div",{class:"card-body",children:[Object(i.jsx)("h5",{class:"card-title",children:t.name}),Object(i.jsxs)("p",{class:"card-text",children:[t.price," ",t.type]}),!d&&!j&&Object(i.jsx)(O,{buttonname:"Buy",className:"btn btn-primary",book:t,isDetail:s}),Object(i.jsx)(O,{buttonname:y,className:v,book:t,inCart:a,onRemove:function(e){c(e)},index:n,orderid:b})]})]})})}function g(e,t){var n;e&&(n=JSON.stringify(e));var o=new XMLHttpRequest;o.responseType="json";var r=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var r=n[o].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}("csrftoken");o.open("POST","http://127.0.0.1:8000/api/books/users"),o.setRequestHeader("Content-Type","application/json"),r&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-CSRFToken",r)),o.onload=function(){if(403===o.status){var e=o.response.detail;console.log(e)}t(o.response,o.status)},o.onerror=function(e){console.log("error",e),t({message:"The request was an error"},400)},o.send(n)}function v(e){var t=Object(o.useState)(""),n=Object(l.a)(t,2),r=n[0],s=n[1],a=Object(o.useState)(""),c=Object(l.a)(a,2),d=c[0],u=c[1],b=(e.userLogin,{username:r,password:d}),f=function(e,t){400===t?alert("Wrong Credentials"):200===t&&(console.log(e.token,t),localStorage.setItem("token","".concat(e.token)),window.location.href="/")},m=function(e,t){console.log("Register ",e,t),200===t&&j(b,f),"A user with that username already exists."===e.username[0]&&alert("User Already Exists")},O=function(e){"username"===e.target.name?s(e.target.value):u(e.target.value)};return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Login User Form"}),Object(i.jsxs)("label",{children:["Username :",Object(i.jsx)("input",{type:"text",name:"username",value:b.username,onChange:O})]}),Object(i.jsxs)("label",{children:["Password :",Object(i.jsx)("input",{type:"password",name:"password",value:b.password,onChange:O})]}),Object(i.jsx)("button",{onClick:function(e){j(b,f)},children:"Login"}),Object(i.jsx)("button",{onClick:function(e){g(b,m)},children:"Register"})]})}var h=document.getElementById("root");h&&a.a.render(Object(i.jsx)(d,{}),h);var k=r.a.createElement,x=document.getElementById("books");x&&a.a.render(k((function(e){var t=Object(o.useState)([]),n=Object(l.a)(t,2),s=n[0],a=n[1],c=function(e,t){a(e),console.log("response",e,t)};return Object(o.useEffect)((function(){b("GET","/books/",c)}),[]),Object(i.jsx)(r.a.Fragment,{children:s.map((function(e,t){return Object(i.jsx)(p,{book:e},"".concat(t,"-{item.id}"))}))})}),x.dataset),x);var y=document.getElementById("bookdetail");y&&a.a.render(k((function(e){var t=Object(o.useState)(null),n=Object(l.a)(t,2),r=n[0],s=n[1],a=Object(o.useState)(!0),c=Object(l.a)(a,2),d=c[0],u=c[1],j=function(e,t){s(e[0]),u(!1)};return Object(o.useEffect)((function(){var t,n;t=e.bookname,n=j,b("GET","/books/".concat(t,"/"),n)}),[]),!0===d?"":Object(i.jsx)(p,{book:r,isDetail:!0})}),y.dataset),y);var R=document.getElementById("usercart");R&&a.a.render(k((function(e){var t=Object(o.useState)([]),n=Object(l.a)(t,2),r=n[0],s=n[1],a=Object(o.useState)(!0),c=Object(l.a)(a,2),d=c[0],u=c[1],b=0;Object(o.useEffect)((function(){m(j)}),[]);var j=function(e,t){console.log("Cart Lookup ",e.usercart_set,t),s(e.usercart_set),u(!1)},f=function(e){s(r.filter((function(t){return r.indexOf(t)!==e})))},g=r.map((function(e,t){return console.log(e.book.price),b+=e.book.price,e.book.id}));return d?"":0===g.length?Object(i.jsx)("div",{className:"text-muted",children:"Cart Is Empty"}):Object(i.jsxs)("div",{children:[r.map((function(e,t){return Object(i.jsx)(p,{book:e.book,index:t,inCart:!0,onRemove:f},t)})),0!==g.length&&Object(i.jsx)(O,{buttonname:"Buy All",className:"btn btn-primary",cartbooks:g}),0!==g.length&&Object(i.jsxs)("div",{children:["Total Cost ",b]})]})}),R.dataset),R);var S=document.getElementById("ownedBooks");S&&a.a.render(k((function(e){var t=Object(o.useState)([]),n=Object(l.a)(t,2),r=n[0],s=n[1],a=Object(o.useState)(!0),c=Object(l.a)(a,2),d=c[0],u=c[1];Object(o.useEffect)((function(){b("GET","/books/owned/",j),u(!1)}),[]);var j=function(e,t){s(e),console.log(e),console.log("order",r)};return d?"Loading":Object(i.jsxs)("div",{children:[" ",r.map((function(e,t){return Object(i.jsxs)("div",{className:"border border-secondary mt-3",children:[Object(i.jsxs)("div",{children:["Order Id : ",e.orderid]}),Object(i.jsx)(p,{book:e.book,owned:!0,expiry:e.expiry,orderid:e.orderid},t),Object(i.jsxs)("div",{children:["Order Duration :",e.duration]}),Object(i.jsxs)("div",{children:["OwnerFrom : ",e.ownerfrom]}),Object(i.jsxs)("div",{children:["Book Expiry : ",e.expiry]}),Object(i.jsxs)("div",{children:["Book Return Amount : ",e.returnamount]}),Object(i.jsxs)("div",{children:["Boom Return Date : ",e.returndate]})]})}))]})}),S.dataset),S);var T=document.getElementById("orderedBooks");T&&a.a.render(k((function(e){var t=Object(o.useState)([]),n=Object(l.a)(t,2),r=n[0],s=n[1],a=Object(o.useState)(!0),c=Object(l.a)(a,2),d=c[0],u=c[1],j=function(e,t){s(e),u(!1)};return Object(o.useEffect)((function(){b("GET","/books/ordered/",j)}),[]),d?"Loading":Object(i.jsx)("div",{children:r.map((function(e,t){return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:["Order ID : ",e.id]}),Object(i.jsx)(p,{book:e.book,ordered:!0,deliveryDate:e.deliveryDate},t),Object(i.jsxs)("div",{children:["Delivery Date : ",e.deliveryDate," "]})]})}))})}),T.dataset),T);var C=document.getElementById("login");C&&a.a.render(k((function(e){var t=Object(o.useState)(""),n=Object(l.a)(t,2),r=(n[0],n[1]);return Object(i.jsx)(v,{userLogin:function(e){console.log(e),r(e)}})}),C.dataset),C),u()},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.1999a1b3.chunk.js.map